--- Pound-2.4.3-logfile/config.c	2008-12-11 00:22:22.509353295 +0200
+++ Pound-2.4.3.logs/config.c	2009-01-08 17:47:08.523739629 +0200
@@ -72,7 +72,7 @@
 };
 #endif
 
-static regex_t  Empty, Comment, User, Group, RootJail, Daemon, LogFacility, LogLevel, Alive, SSLEngine, Control;
+static regex_t  Empty, Comment, User, Group, RootJail, Daemon, LogFacility, LogFile, LogLevel, ErrorLog, Alive, SSLEngine, Control;
 static regex_t  ListenHTTP, ListenHTTPS, End, Address, Port, Cert, xHTTP, Client, CheckURL;
 static regex_t  Err414, Err500, Err501, Err503, MaxRequest, HeadRemove, RewriteLocation, RewriteDestination;
 static regex_t  Service, ServiceName, URL, HeadRequire, HeadDeny, BackEnd, Emergency, Priority, HAport, HAportAddr;
@@ -1104,6 +1104,18 @@
                         def_facility = facilitynames[i].c_val;
                         break;
                     }
+        } else if(!regexec(&LogFile, lin, 4, matches, 0)) {
+            lin[matches[1].rm_eo] = '\0';
+            if((log_file = strdup(lin + matches[1].rm_so)) == NULL) {
+                logmsg(LOG_ERR, "line %d: LogFile config: out of memory - aborted", n_lin);
+                exit(1);
+            }
+        } else if(!regexec(&ErrorLog, lin, 4, matches, 0)) {
+            lin[matches[1].rm_eo] = '\0';
+            if((error_log = strdup(lin + matches[1].rm_so)) == NULL) {
+                logmsg(LOG_ERR, "line %d: ErrorLog config: out of memory - aborted", n_lin);
+                exit(1);
+            }
         } else if(!regexec(&Grace, lin, 4, matches, 0)) {
             grace = atoi(lin + matches[1].rm_so);
         } else if(!regexec(&LogLevel, lin, 4, matches, 0)) {
@@ -1204,7 +1216,9 @@
     || regcomp(&RootJail, "^[ \t]*RootJail[ \t]+\"(.+)\"[ \t]*$", REG_ICASE | REG_NEWLINE | REG_EXTENDED)
     || regcomp(&Daemon, "^[ \t]*Daemon[ \t]+([01])[ \t]*$", REG_ICASE | REG_NEWLINE | REG_EXTENDED)
     || regcomp(&LogFacility, "^[ \t]*LogFacility[ \t]+([a-z0-9-]+)[ \t]*$", REG_ICASE | REG_NEWLINE | REG_EXTENDED)
+    || regcomp(&LogFile, "^[ \t]*LogFile[ \t]+(.+)[ \t]*$", REG_ICASE | REG_NEWLINE | REG_EXTENDED)
     || regcomp(&LogLevel, "^[ \t]*LogLevel[ \t]+([0-5])[ \t]*$", REG_ICASE | REG_NEWLINE | REG_EXTENDED)
+    || regcomp(&ErrorLog, "^[ \t]*ErrorLog[ \t]+(.+)[ \t]*$", REG_ICASE | REG_NEWLINE | REG_EXTENDED)
     || regcomp(&Grace, "^[ \t]*Grace[ \t]+([0-9]+)[ \t]*$", REG_ICASE | REG_NEWLINE | REG_EXTENDED)
     || regcomp(&Alive, "^[ \t]*Alive[ \t]+([1-9][0-9]*)[ \t]*$", REG_ICASE | REG_NEWLINE | REG_EXTENDED)
     || regcomp(&SSLEngine, "^[ \t]*SSLEngine[ \t]+\"(.+)\"[ \t]*$", REG_ICASE | REG_NEWLINE | REG_EXTENDED)
@@ -1329,6 +1343,8 @@
     group = NULL;
     root_jail = NULL;
     ctrl_name = NULL;
+    log_file = NULL;
+    error_log = NULL;
 
     alive_to = 30;
     daemonize = 1;
@@ -1358,7 +1374,9 @@
     regfree(&RootJail);
     regfree(&Daemon);
     regfree(&LogFacility);
+    regfree(&LogFile);
     regfree(&LogLevel);
+    regfree(&ErrorLog);
     regfree(&Grace);
     regfree(&Alive);
     regfree(&SSLEngine);
--- Pound-2.4.3.logs/pound.c	2009-01-08 18:03:00.316961385 +0200
+++ Pound-2.4.3.logs/pound.c	2009-01-08 18:03:00.316961385 +0200
@@ -33,6 +33,8 @@
             *group,             /* group to run as */
             *root_jail,         /* directory to chroot to */
             *pid_name,          /* file to record pid in */
+            *log_file,          /* print log messages to this file, instead of syslog */
+            *error_log,         /* print error messages to this file, instead of syslog */
             *ctrl_name;         /* control socket name */
 
 int         alive_to,           /* check interval for resurrection */
@@ -289,10 +291,22 @@
         /* daemonize - make ourselves a subprocess. */
         switch (fork()) {
             case 0:
-                if(log_facility != -1) {
-                    close(0);
-                    close(1);
-                    close(2);
+                close(0);
+                if (log_file) {
+                    stdout = freopen(log_file, "a", stdout);
+                    setlinebuf(stdout);
+                } else {
+                    if (log_facility != -1) {
+                        close(1);
+                    }
+                }
+                if (error_log) {
+                    stderr = freopen(error_log, "a", stderr);
+                    setlinebuf(stderr);
+                } else {
+                    if (log_facility != -1) {
+                        close(2);
+                    }
                 }
                 break;
             case -1:
--- Pound-2.4.3-logfile/pound.h	2008-12-11 00:16:43.449299956 +0200
+++ Pound-2.4.3.logs/pound.h	2009-01-08 17:47:38.940178535 +0200
@@ -236,6 +236,8 @@
             *group,             /* group to run as */
             *root_jail,         /* directory to chroot to */
             *pid_name,          /* file to record pid in */
+            *log_file,          /* print log messages to this file, instead of syslog */
+            *error_log,         /* print error messages to this file, instead of syslog */
             *ctrl_name;         /* control socket name */
 
 extern int  alive_to,           /* check interval for resurrection */
--- Pound-2.4.3.logs/svc.c	2009-01-08 18:16:21.407506564 +0200
+++ Pound-2.4.3.logs/svc.c	2009-01-08 18:16:21.407506564 +0200
@@ -176,13 +176,25 @@
     char    buf[MAXBUF + 1];
     va_list ap;
     struct tm   *t_now, t_res;
+    int log = (priority == LOG_INFO || priority == LOG_DEBUG);
 
     buf[MAXBUF] = '\0';
     va_start(ap, fmt);
     vsnprintf(buf, MAXBUF, fmt, ap);
     va_end(ap);
-    if(log_facility == -1) {
-        fprintf((priority == LOG_INFO || priority == LOG_DEBUG)? stdout: stderr, "%s\n", buf);
+
+    // if access log or error log are set, use them.
+    if (log && log_file) {
+        printf("%s\n", buf);
+        fprintf(stdout, "%s\n", buf);
+        return;
+    }
+    if (!log && error_log) {
+        fprintf(stderr, "%s\n", buf);
+    }
+
+    if (log_facility == -1) {
+        fprintf(log ? stdout : stderr, "%s\n", buf);
     } else {
         if(print_log)
             printf("%s\n", buf);
